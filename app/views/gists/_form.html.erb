<%= form_for(@gist) do |f| %>
  <% if @gist.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@gist.errors.count, "error") %> prohibited this gist from being saved:</h2>

      <ul>
      <% @gist.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.text_field :description, placeholder: 'Gist description', class: 'form-control',required: true %>
  </div>
    <%= f.nested_fields_for :file_lists do |file_list| %>
        <%= file_list.remove_nested_fields_link 'Remove', class: 'btn btn-danger', role: 'button' %>

        <div class="field">
          <br>
          <%= file_list.text_field :name, placeholder: 'file name', class: 'form-control',required: true %>
        </div>

        <div class="field">
          <%= file_list.text_area :content, style: 'display:none' %>
          <div class="editor"/>
        </div>
    <% end %>


  <div class="actions">
    <%= f.add_nested_fields_link :file_lists, 'Add file', class: 'btn btn-primary', role: 'button' %>
    <%= f.submit class: 'btn btn-success pull-right'  %>

  </div>
<% end %>
<script src="http://ace.ajax.org/build/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
  addAceToText();
</script>